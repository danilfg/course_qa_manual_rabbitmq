# üê∞ RabbitMQ Cluster —Å Docker Compose

![RabbitMQ](https://img.shields.io/badge/RabbitMQ-Cluster-orange?style=flat-square&logo=rabbitmq)
![Docker](https://img.shields.io/badge/Docker-Compose-blue?style=flat-square&logo=docker)
![Status](https://img.shields.io/badge/Status-In%20Progress-yellow?style=flat-square)

## üìú –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è RabbitMQ-–∫–ª–∞—Å—Ç–µ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Docker Compose**. 

### üóÇ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`docker-compose.yml`**:
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã RabbitMQ –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∫ –Ω–∏–º —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- **`rabbitmq.config`**:
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RabbitMQ:
    - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è.
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤.
    - –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤.
- **`definitions.json`**:
  - –°–æ–∑–¥–∞—ë—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã RabbitMQ:
    - –û—á–µ—Ä–µ–¥–∏.
    - Exchange.
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.
    - –°–≤—è–∑–∏ (bindings).

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/danilfg/course_qa_manual_rabbitmq.git
cd course_qa_manual_rabbitmq
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose up -d
```

- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
  - **–ü–æ—Ä—Ç 15672**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Management UI.
  - **–ü–æ—Ä—Ç 15671**: AMQP over SSL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

---

## üîß –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å RabbitMQ

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—á–µ—Ä–µ–¥–∏**

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± –æ—á–µ—Ä–µ–¥–∏ `q.user.created`:

```bash
curl -u guest:guest -X GET \
  http://localhost:15672/api/queues/%2F/q.user.created
```

---

### **2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å**

–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å `q.user.created` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π `curl` –∑–∞–ø—Ä–æ—Å:

```bash
curl -u guest:guest -X POST \
  http://localhost:15672/api/exchanges/%2F/amq.default/publish \
  -H "Content-Type: application/json" \
  -d '{
        "properties": {},
        "routing_key": "q.user.created",
        "payload": "{\"user_id\":123, \"action\":\"created\", \"timestamp\":\"2025-01-05T12:00:00Z\", \"details\":{\"email\":\"user@example.com\", \"name\":\"John Doe\"}}",
        "payload_encoding": "string"
      }'
```

---

### **3. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—á–µ—Ä–µ–¥–∏**

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏:

```bash
curl -u guest:guest -X GET \
  http://localhost:15672/api/queues/%2F/q.user.created
```

---

### **4. –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏**

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ `q.user.created`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
curl -u guest:guest -X POST \
  http://localhost:15672/api/queues/%2F/q.user.created/get \
  -H "Content-Type: application/json" \
  -d '{
        "count": 1,
        "ackmode": "ack_requeue_false",
        "encoding": "auto",
        "truncate": 50000
      }'
```

- **`count`**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —á—Ç–µ–Ω–∏—è (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `1`).
- **`ackmode`**:
  - `ack_requeue_false`: –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –ø–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è.
  - `ack_requeue_true`: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏.
- **`truncate`**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–∞–π—Ç–∞—Ö.

---

## üñ• Management UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å RabbitMQ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- üåê [http://localhost:15672](http://localhost:15672)
- üîë –õ–æ–≥–∏–Ω: `guest`
- üîë –ü–∞—Ä–æ–ª—å: `guest`

---

## ‚öôÔ∏è –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ RabbitMQ**:
   - –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `definitions.json`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
     - –û—á–µ—Ä–µ–¥—å: `q.user.created`.
     - Exchange: `amq.default`.
     - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

2. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å RabbitMQ**:
   - –° –ø–æ–º–æ—â—å—é Management UI –∏–ª–∏ HTTP API –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, –ø–æ–ª—É—á–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É RabbitMQ-–∫–ª–∞—Å—Ç–µ—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:
- üì¶ –ë—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.
- üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ API –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- üåÄ –õ—ë–≥–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

---

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–π—Ç–µ **Issue** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏! üòä

![GitHub](https://img.shields.io/badge/GitHub-Contribute-blue?style=flat-square&logo=github)
